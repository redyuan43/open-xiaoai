# å°çˆ±éŸ³ç®± Pro åˆ·æœºæ•™ç¨‹

> [!IMPORTANT]
> æœ¬æ•™ç¨‹ä»…é€‚ç”¨äº **å°çˆ±éŸ³ç®± Proï¼ˆLX06ï¼‰** å’Œ **Xiaomi æ™ºèƒ½éŸ³ç®± Proï¼ˆOH2Pï¼‰** è¿™ä¸¤æ¬¾æœºå‹ï¼Œ**å…¶ä»–å‹å·**çš„å°çˆ±éŸ³ç®±è¯·å‹¿ç›´æ¥ä½¿ç”¨ï¼ğŸš¨

### å‡†å¤‡æ¡ä»¶

- å°çˆ±éŸ³ç®±
  - Xiaomi æ™ºèƒ½éŸ³ç®± Proï¼ˆOH2Pï¼‰
  - å°çˆ±éŸ³ç®± Proï¼ˆLX06ï¼‰
- æ•°æ®çº¿
  - Type-Cï¼ˆé€‚ç”¨äºæ–°æ¬¾å°çˆ±éŸ³ç®± Proï¼Œ**æ— éœ€æ‹†æœº**ï¼‰
  - Micro USBï¼ˆæ—§æ¬¾å°çˆ±éŸ³ç®± Pro ç”¨è¿™ç§ï¼Œ**éœ€è¦æ‹†æœº**ï¼‰
  
> [!NOTE]
> æ³¨æ„ï¼šæ•°æ®çº¿ä¸èƒ½åªæ˜¯å……ç”µçº¿ï¼Œéœ€è¦è¿æ¥åˆ°ç”µè„‘ä¸Šèƒ½ä¼ è¾“æ•°æ®æ‰è¡Œã€‚

### è¿æ¥ç”µè„‘

æ–°æ¬¾çš„ Xiaomi æ™ºèƒ½éŸ³ç®± Pro å¯ä»¥ç›´æ¥ä½¿ç”¨ Type-C æ•°æ®çº¿é€šè¿‡éŸ³å“åº•éƒ¨çš„ Type-C æ¥å£è¿æ¥åˆ°ç”µè„‘ã€‚

æ—§æ¬¾å°çˆ±éŸ³ç®± Pro éœ€è¦å…ˆæŠŠéŸ³ç®±å¤–å£³æ‹†ä¸‹æ¥ï¼ˆ[å‚è€ƒæ­¥éª¤](https://www.52audio.com/archives/38303.html)ï¼‰ï¼Œç„¶ååœ¨ä¸»æ¿å·¦ä¸Šè§’æ‰¾åˆ° Mico USB çš„è°ƒè¯•æ¥å£ï¼Œä½¿ç”¨ Mico USB æ•°æ®çº¿è¿æ¥åˆ°ç”µè„‘ã€‚

![](./images/mico-usb.jpg)

### å¼€å§‹åˆ·æœº

> [!CAUTION]
> åˆ·æœºæœ‰é£é™©ï¼Œæ“ä½œéœ€è°¨æ…ã€‚åˆ·æœºå¯èƒ½ä¼šé€ æˆè®¾å¤‡å¤±å»ä¿ä¿®èµ„æ ¼ï¼Œå˜ç –æ— æ³•è¿è¡Œç­‰ã€‚è¯·è‡ªè¡Œè¯„ä¼°ç›¸å…³é£é™©ï¼Œä¸€åˆ‡åæœè‡ªè´Ÿï¼ğŸš¨

é¦–å…ˆï¼Œä¸‹è½½æˆ–è‡ªè¡Œåˆ¶ä½œ[è¡¥ä¸å›ºä»¶](../packages/client-patch/README.md)ï¼Œé‡å‘½åä¸º `root_patched.squashfs`ã€‚

ç„¶åï¼Œä¸‹è½½åˆ·æœºå·¥å…·ï¼šhttps://androidmtk.com/download-amlogic-flash-tool

æŠŠä¸‹è½½å¥½çš„åˆ·æœºå·¥å…·æ–‡ä»¶å¤¹è§£å‹åˆ°æ¡Œé¢ï¼Œé‡å‘½åä¸º `Amlogic_Flash_Tool_v6.0.0`

> [!TIP]
> å¦‚æœä½ æ˜¯ macOS ç³»ç»Ÿï¼Œè¯·åˆ°æ­¤å¤„ä¸‹è½½[åˆ·æœºå·¥å…·å’Œä½¿ç”¨æ•™ç¨‹](../packages/flash-tool/README.md)ã€‚

![](./images/driver.jpg)

ç„¶åè¿è¡Œ `AMLLogic driver installer.exe` æ–‡ä»¶ï¼ŒæŒ‰ç…§æç¤ºå®‰è£… USB é©±åŠ¨ã€‚

![](./images/bash.jpg)

å®‰è£…å¥½é©±åŠ¨åï¼Œæ‰“å¼€ `/bin` ç›®å½•ï¼Œç„¶ååœ¨ç©ºç™½å¤„å³é”®é€‰æ‹©ä½¿ç”¨ [Git Bash](https://git-scm.com/downloads) æ‰“å¼€å½“å‰ç›®å½•ã€‚

> [!NOTE]
> è¯·ç¡®è®¤ä½ å·²ç»å°†å°çˆ±éŸ³ç®±ç”¨æ•°æ®çº¿è¿æ¥åˆ°äº† Windows ç”µè„‘ï¼Œå¹¶ä¸”å®‰è£…å¥½äº†é©±åŠ¨ç¨‹åºã€‚

ç„¶åï¼Œè¯·æŒ‰ç…§è¯´æ˜åœ¨æ‰“å¼€çš„ç»ˆç«¯é‡Œä¾æ¬¡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```shell
# ğŸš— ç¬¬ 1 æ­¥ï¼šæ‹”æ‰å°çˆ±éŸ³ç®±çš„ç”µæºçº¿ï¼Œé‡æ–°æ’ä¸Šç”µæºåï¼Œç«‹å³åœ¨ç»ˆç«¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤
./update.exe identify

# å¦‚æœæ˜¾ç¤ºç±»ä¼¼ä¸‹é¢çš„å†…å®¹ï¼Œè¯´æ˜å°çˆ±éŸ³ç®±å·²ç»æˆåŠŸè¿æ¥åˆ°äº†ç”µè„‘ï¼Œå¯ä»¥ç»§ç»­è¿›è¡Œä¸‹ä¸€æ­¥
# This firmware version is 0-7-0-16-0-0-0-0

# å¦åˆ™ç»§ç»­å¿«é€Ÿé‡è¯•å‡ æ¬¡è¯¥å‘½ä»¤ï¼Œæˆ–è€…é‡æ–°æ‹”æ‰ç”µæºä¸Šç”µåé‡è¯•ï¼Œç›´è‡³æ˜¾ç¤ºå‡ºæ¥ç‰ˆæœ¬å·ã€‚

# â° ç¬¬ 2 æ­¥ï¼šè®¾ç½®å¯åŠ¨åˆ†åŒºå’Œç­‰å¾…æ—¶é•¿

# è®¾ç½® uboot å¯åŠ¨ç­‰å¾… 15s
./update.exe bulkcmd "setenv bootdelay 15"
# è®¾ç½® boot0 ä½œä¸ºå¯åŠ¨åˆ†åŒº
./update.exe bulkcmd "setenv boot_part boot0"
# ä¿å­˜ç¯å¢ƒå˜é‡ï¼Œä½¿ç”Ÿæ•ˆ
./update.exe bulkcmd "saveenv"

# âš¡ï¸ ç¬¬ 3 æ­¥ï¼šåˆ·å…¥ system0
./update.exe partition system0 root_patched.squashfs
# æ³¨æ„ï¼šéœ€è¦æŠŠ root_patched.squashfs æ›¿æ¢æˆä½ ä¸‹è½½çš„è¡¥ä¸å›ºä»¶å®é™…è·¯å¾„
```

> [!TIP]
> å¦‚æœä½ å¡åœ¨ç¬¬ä¸€æ­¥ï¼Œè¿æ¥ä¸ä¸Šè®¾å¤‡ï¼Œå¯ä»¥æŒ‰ç…§[æ­¤æ•™ç¨‹](https://github.com/idootop/open-xiaoai/issues/6#issuecomment-2815632879)æ’æŸ¥é—®é¢˜ã€‚

> [!NOTE]
> æç¤ºåˆ·æœºæˆåŠŸä¹‹åï¼Œæ‹”æ‰æ•°æ®çº¿å’Œç”µæºï¼Œé‡æ–°æ’ç”µé‡å¯å°çˆ±éŸ³ç®±å³å¯ã€‚
> å¦‚æœé‡å¯ä¹‹åå°çˆ±éŸ³ç®±æ²¡æœ‰ååº”ï¼Œå¯ä»¥æ‹”æ‰ç”µæºç­‰å‡ åˆ†é’Ÿå†é‡æ–°ä¸Šç”µå¼€æœºã€‚
> å¦‚æœè¿˜æ˜¯æ²¡ååº”ï¼Œå¯ä»¥é‡æ–°åˆ·æœºè¯•è¯•çœ‹ï¼Œæˆ–è€…å°†å¯åŠ¨åˆ†åŒºè®¾ç½®æˆ `boot1` æ¢å¤åŸç³»ç»Ÿå¯åŠ¨ã€‚

### SSH è¿æ¥åˆ°å°çˆ±éŸ³ç®±

åˆ·æœºæˆåŠŸåï¼Œè¡¥ä¸å›ºä»¶é»˜è®¤å¼€å¯ SSH åŠŸèƒ½ï¼Œé»˜è®¤å¯†ç  `open-xiaoai`

```shell
ssh -o HostKeyAlgorithms=+ssh-rsa root@ä½ çš„å°çˆ±éŸ³ç®±å±€åŸŸç½‘IPåœ°å€
# æ¯”å¦‚ï¼šssh -o HostKeyAlgorithms=+ssh-rsa root@192.168.31.227
```

### æ›´æ–°ç³»ç»Ÿ

å°çˆ±éŸ³ç®±æœ‰ 2 å¥—ç³»ç»Ÿï¼Œä¸Šé¢æˆ‘ä»¬åªæ˜¯å°† `system0` åˆ·æˆäº†æ‰“è¡¥ä¸åçš„ç³»ç»Ÿã€‚

å¦‚æœä¹‹åä½ æƒ³è¦æ›´æ–°ç³»ç»Ÿï¼Œæˆ–è€…æ¢å›åŸæ¥çš„ç³»ç»Ÿï¼Œå°†å¯åŠ¨åˆ†æ”¯è®¾ç½®æˆ `boot1` é‡å¯å³å¯ã€‚

>

```shell
# è¿æ¥åˆ° SSH åæ‰§è¡Œ
fw_env -s boot_part boot1

# æˆ–è€…ä½¿ç”¨å’Œä¸Šé¢åˆ·æœºç›¸åŒçš„æ–¹å¼
./update.exe bulkcmd "setenv boot_part boot1"
./update.exe bulkcmd "saveenv"
```
